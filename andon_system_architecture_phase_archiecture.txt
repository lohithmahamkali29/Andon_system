# ğŸ“ Andon System Architecture

This document outlines the final, refactored structure of the Andon System, designed for clarity, maintainability, and scalability.

## ğŸ—ï¸ Refactored Project Structure

```
andon-system/
â”œâ”€â”€ ğŸ“„ docker-compose.yml
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ README.md
â”‚
â”œâ”€â”€ ğŸ“ backend/
â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”œâ”€â”€ ğŸ“„ server.js              # Main Express server (thin and clean)
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ config/                # Centralized configuration
â”‚   â”‚   â””â”€â”€ ğŸ“„ database.js
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ models/                # Sequelize models for database tables
â”‚   â”‚   â””â”€â”€ ğŸ“„ index.js
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ routes/                # API routes, separated by concern
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ api.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ stations.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ faults.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ shift.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ reports.js
â”‚   â”‚   â””â”€â”€ ğŸ“„ dashboard.js
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ services/              # Business logic
â”‚   â”‚   â””â”€â”€ ğŸ“„ devicePoller.js
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ scripts/               # Utility and setup scripts
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ setup-database.js
â”‚   â”‚   â””â”€â”€ ğŸ“„ seed-data.js
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ database/              # SQLite database files
â”‚       â””â”€â”€ ğŸ“„ andon_stations.db
â”‚
â””â”€â”€ ğŸ“ frontend/
    â””â”€â”€ ğŸ“ andon-dashboard/
        â”œâ”€â”€ ğŸ“„ package.json
        â”œâ”€â”€ ğŸ“„ Dockerfile
        â”‚
        â””â”€â”€ ğŸ“ src/
            â”œâ”€â”€ ğŸ“„ App.js
            â”œâ”€â”€ ğŸ“„ Dashboard.js         # Main container component
            â”‚
            â”œâ”€â”€ ğŸ“ components/        # Reusable UI components
            â”‚   â”œâ”€â”€ ğŸ“„ Header.js
            â”‚   â”œâ”€â”€ ğŸ“„ NavigationBar.js
            â”‚   â”œâ”€â”€ ğŸ“„ StationHeader.js
            â”‚   â”œâ”€â”€ ğŸ“„ StationDisplay.js
            â”‚   â””â”€â”€ ğŸ“„ ActiveFaultsSidebar.js
            â”‚
            â””â”€â”€ ğŸ“ modals/            # Modal dialog components
                â”œâ”€â”€ ğŸ“„ AddStationModal.js
                â”œâ”€â”€ ğŸ“„ EditStationModal.js
                â”œâ”€â”€ ğŸ“„ DeleteStationModal.js
                â”œâ”€â”€ ğŸ“„ ShiftTimingsModal.js
                â”œâ”€â”€ ğŸ“„ ReportsModal.js
                â””â”€â”€ ğŸ“„ TableModal.js
```

## âœ… Core Principles of the Refactored Architecture

1.  **Separation of Concerns**
    *   **Backend**: `server.js` is now only responsible for starting the server and mounting middleware and routes. All API logic is delegated to the `/routes` directory, and business logic is handled in `/services`.
    *   **Frontend**: The main `Dashboard.js` component has been broken down into smaller, single-responsibility components, making the UI easier to manage.

2.  **Consistent Data Access**
    *   All database queries in the backend now exclusively use the **Sequelize ORM** and the models defined in `/models`. This eliminates raw SQL strings, reduces the risk of SQL injection, and ensures a single, consistent way to interact with the data.
    *   The redundant `utils/database.js` file has been removed.

3.  **Component-Based UI**
    *   The frontend is structured around small, reusable React components. This makes the code easier to read, test, and maintain.
    *   Styling is managed by **Tailwind CSS**, promoting a consistent design system and reducing the use of messy inline styles.

4.  **Centralized Configuration**
    *   Configuration for the database and other services is centralized in the `/config` directory, making it easy to manage different environments (development, production, etc.).

## ğŸš€ Key Improvements

*   **Maintainability**: With a clear and consistent structure, developers can easily locate code and understand its purpose.
*   **Scalability**: The modular design of both the frontend and backend allows for new features to be added with minimal impact on existing code.
*   **Readability**: Code is cleaner and more declarative, especially with the removal of raw SQL and inline styles.
*   **Developer Experience**: A well-organized project is easier to work on, leading to faster development cycles and fewer bugs.
